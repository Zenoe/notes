
* open file with chiniese
#+begin_src cpp

    std::locale::global(std::locale(""));  //txt 编码是默认ansi
    //std::locale::global(std::locale(".65001"));// txt 编码是 utf8
    // Open files (wifstream/wofstream for Unicode)
    std::wifstream infile(L"fileWithChinese.txt");

    if (!infile || !outfile) {
        std::wcerr << L"File open error." << std::endl;
        return 1;
    }

    std::wstring caseid;
    while (std::getline(infile, caseid)) {
    }
#+end_src

* console output chiniese

#+begin_src cpp
std::locale::global(std::locale(""));  // need this
// _setmode(_fileno(stdout), _O_U16TEXT); // or this
// 没有上面的设置，控制台无法输出识别中文字符, ss 传给sql执行函数也会被截断(只包含前面英文部分)

std::wstringstream ss;
ss << L"SELECT TOP 1 ID FROM TEST_CASE_DATA_LOG "
L"WHERE ANALYST_LOG LIKE N'%RG-三层路由域-BGP4+-ADMINDIST-93293-GN-001%' "

std::wcout << L"searching: " << ss.str() << std::endl;


#+end_src

* emacs create cpp file on windows default coding is utf-8-dos
C-h v buffer-file-coding-system

连接sqlserver 的密码包含unicode 字符  L"PWD=·1234567890-=autotest;"
导致无法连接数据库

解决方案是，把buffer 改为utf16,然后再把代码贴进去,数据库连接OK
不知道为啥 utf8 不行

或者直接使用vs
